{% extends 'base.html' %}
{% load static %}

{% block title %}Réservation confirmée - Location Simple{% endblock %}

{% block content %}
<div class="container py-5 my-4">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card border-0 shadow-soft">
                <div class="card-body p-4 p-md-5">
                    <!-- Success Header -->
                    <div class="text-center mb-5">
                        <div class="d-inline-flex align-items-center justify-content-center bg-success bg-opacity-10 rounded-circle mb-4" style="width: 100px; height: 100px;">
                            <i class="bi bi-check2-circle text-success" style="font-size: 3.5rem;"></i>
                        </div>
                        <h1 class="display-5 fw-bold text-success mb-3">Réservation confirmée !</h1>
                        <p class="lead text-muted mb-0">
                            Votre demande de réservation a bien été enregistrée et transmise au propriétaire.
                        </p>
                    </div>
                    
                    <!-- Reservation Summary -->
                    <div class="card border-0 bg-light mb-5">
                        <div class="card-body p-4">
                            <h5 class="fw-bold mb-4">Récapitulatif de votre réservation</h5>
                            <div class="row g-4">
                                <div class="col-md-6">
                                    <div class="d-flex">
                                        <div class="me-3 text-primary">
                                            <i class="bi bi-box-seam" style="font-size: 1.5rem;"></i>
                                        </div>
                                        <div>
                                            <h6 class="text-uppercase text-muted small mb-2">Article</h6>
                                            <p class="mb-0 fw-bold">{{ item.title }}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="d-flex">
                                        <div class="me-3 text-primary">
                                            <i class="bi bi-person" style="font-size: 1.5rem;"></i>
                                        </div>
                                        <div>
                                            <h6 class="text-uppercase text-muted small mb-2">Propriétaire</h6>
                                            <p class="mb-0">{{ item.owner.get_full_name|default:item.owner.email }}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="d-flex">
                                        <div class="me-3 text-primary">
                                            <i class="bi bi-calendar3" style="font-size: 1.5rem;"></i>
                                        </div>
                                        <div>
                                            <h6 class="text-uppercase text-muted small mb-2">Période</h6>
                                            <p class="mb-1">
                                                Du <strong>{{ start_date|date:"d/m/Y" }}</strong> au <strong>{{ end_date|date:"d/m/Y" }}</strong>
                                            </p>
                                            <p class="mb-0 text-muted">
                                                <small>{{ duration }} jour{{ duration|pluralize }}</small>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="d-flex">
                                        <div class="me-3 text-primary">
                                            <i class="bi bi-credit-card" style="font-size: 1.5rem;"></i>
                                        </div>
                                        <div>
                                            <h6 class="text-uppercase text-muted small mb-2">Montant total</h6>
                                            <p class="h4 mb-0 text-primary fw-bold">{{ total_price|floatformat:2 }} €</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Next Steps -->
                    <div class="mb-5">
                        <h5 class="h5 fw-bold mb-4 text-center">Prochaines étapes</h5>
                        <div class="row g-4">
                            <div class="col-md-6">
                                <div class="card h-100 border-0 shadow-sm">
                                    <div class="card-body p-4">
                                        <div class="d-flex">
                                            <div class="bg-primary bg-opacity-10 text-primary rounded-circle d-flex align-items-center justify-content-center me-4" style="width: 48px; height: 48px; min-width: 48px;">
                                                <i class="bi bi-chat-dots" style="font-size: 1.25rem;"></i>
                                            </div>
                                            <div>
                                                <h6 class="fw-bold mb-1">1. En attente de confirmation</h6>
                                                <p class="text-muted mb-0 small">Le propriétaire a 24h pour accepter ou refuser votre demande.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card h-100 border-0 shadow-sm">
                                    <div class="card-body p-4">
                                        <div class="d-flex">
                                            <div class="bg-primary bg-opacity-10 text-primary rounded-circle d-flex align-items-center justify-content-center me-4" style="width: 48px; height: 48px; min-width: 48px;">
                                                <i class="bi bi-shield-check" style="font-size: 1.25rem;"></i>
                                            </div>
                                            <div>
                                                <h6 class="fw-bold mb-1">2. Paiement sécurisé</h6>
                                                <p class="text-muted mb-0 small">Le montant ne sera débité qu'après acceptation du propriétaire.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Support & Next Steps -->
                    <div class="text-center mt-5 pt-4 border-top">
                        <p class="text-muted mb-4">
                            Vous recevrez un email de confirmation avec les détails de votre réservation.
                            Pour toute question, contactez notre service client.
                        </p>
                        <div class="d-flex flex-column flex-sm-row justify-content-center gap-3">
                            <a href="{% url 'home' %}" class="btn btn-primary px-5">
                                <i class="bi bi-house-door me-2"></i> Retour à l'accueil
                            </a>
                            <a href="#" class="btn btn-outline-secondary px-4">
                                <i class="bi bi-headset me-2"></i> Contacter le support
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Custom styles specific to this page */
    .card {
        border-radius: 12px;
        overflow: hidden;
    }
    
    .bg-light {
        background-color: #f8f9ff !important;
    }
    
    .btn {
        transition: all 0.3s ease;
    }
    
    @media (max-width: 768px) {
        .card-body {
            padding: 2rem !important;
        }
        
        .display-5 {
            font-size: 2rem;
        }
    }
</style>
{% endblock %}
